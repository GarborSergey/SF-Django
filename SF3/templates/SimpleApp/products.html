{% extends 'base.html' %}
{% load custom_filters %}
{% load custom_tags %}
{% block title %}
  Products
{% endblock %}

{% block content %}
  <h1>All products</h1>
  <h3>{% current_time %}</h3>
  <h3>{{ next_sale|default_if_none:"next sale is None" }}</h3>

  {% if products %}
    <table align="center">
      <tr>
        <td>Name</td>
        <td>Description</td>
        <td>Category</td>
        <td>Quantity</td>
      </tr>

      {% for product in products %}
        <tr>
          <td>{{ product.name }}</td>
          <td>{{ product.description|truncatewords:2  }}</td>
          <td>{{ product.category.name }}</td>
          <td>{{ product.quantity }}</td>
          <td>{{ product.cost|currency:"usd" }}</td>
        </tr>
      {% endfor %}
    </table>
  {% else %}
    <h3>Products is empty</h3>
  {% endif %}
{% endblock %}